<!DOCTYPE html>
<!-- saved from url=(0076)http://demos.creative-tim.com/material-dashboard-pro/examples/dashboard.html -->
<html lang="en" class="perfect-scrollbar-on">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- <link rel="apple-touch-icon" sizes="76x76" href="http://demos.creative-tim.com/material-dashboard-pro/assets/img/apple-icon.png"> -->
    <!-- <link rel="icon" type="image/png" href="http://demos.creative-tim.com/material-dashboard-pro/assets/img/favicon.png"> -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>UFA CREDIT </title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta name="viewport" content="width=device-width">
    <!-- Canonical SEO -->
    <!-- Bootstrap core CSS     -->
    <link href="../../js/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/extra.css" rel="stylesheet">
    <!--  Material Dashboard CSS    -->
    <link href="../../css/material-dashboard.css?v=<?=time()?>" rel="stylesheet">
    <!-- <link href="../../css/AweetAlert.css?v=<?=time()?>" rel="stylesheet"> -->
    <link href="../../css/sweetalert.css" rel="stylesheet" >
    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <!-- <link href="css/main2.css?v=<?=time()?>" rel="stylesheet"> -->
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" rel="stylesheet">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    
</head>

<body ng-app="myApp" ng-controller="myCtrl">
    <div class="preloader">
            <div class="content">
                <div class="circle">
                    <div class="inner"></div>
                </div>
                <div class="circle">
                    <div class="inner"></div>
                </div>
                <div class="circle">
                    <div class="inner"></div>
                </div>
                <div class="circle">
                    <div class="inner"></div>
                </div>
                <div class="circle">
                    <div class="inner"></div>
                </div>
            </div>
        </div>
    <div class="wrapper">
        <div class="sidebar" data-active-color="green" data-background-color="black" data-image="">
            <!--
        Tip 1: You can change the color of active element of the sidebar using: data-active-color="purple | blue | green | orange | red | rose"
        Tip 2: you can also add an image using data-image tag
        Tip 3: you can change the color of the sidebar with data-background-color="white | black"
    -->
            <div class="logo">
                <a href="" class="simple-text">
                UFA Thai 
                </a>
            </div>
            <div class="logo logo-mini">
                <a href="" class="simple-text">
                    UFA
                </a>
            </div>
            <div class="sidebar-wrapper">
               <!--  <div class="user">
                    <div class="photo">
                        <img src="img/profile.png">
                    </div>
                    <div class="info">
                        <a >
                            USERS ADMIN
                           
                        </a>
                       
                    </div>
                </div> -->
                <ul class="nav">
                    <!-- <li><i class=""></i></li> -->
                    <li x-ng-repeat-start="x in Menu">
                    </li>
                    <li class="ng-class:{'active':y.title == 'ผู้ใช้งาน'}" x-ng-repeat-end ng-repeat="y in x.group">
                            <a ng-if="y.title == 'ผู้ใช้งาน' || y.title == 'สรุปภาพรวม' || y.title == 'สรุปยอดตามเวลา' || y.title == 'อนุมัต ฝาก-ถอน'"  href="{{y.url}}" id="menu_{{y.id}}">
                                <i class='{{ y.symbol }}' aria-hidden="true"></i>
                                <p ng-bind="y.title"></p> <span class="badge notification-left"></span>
                            </a>

                            <a data-toggle="collapse" href="#menu_{{y.id}}" ng-if="y.title =='จัดการเว็บเอเย่น' || y.title == 'จัดการธนาคาร' || y.title == 'จัดการสมาชิกเว็บ' || y.title == 'จัดการรายการ ฝาก-ถอน'" >
                                <i class='{{ y.symbol }}' aria-hidden="true"></i>
                                <p ><span ng-bind="y.title"></span><b class="caret"></b></p> 
                            </a>

                            

                                <div ng-if="y.title =='จัดการเว็บเอเย่น' || y.title == 'จัดการธนาคาร' || y.title == 'จัดการสมาชิกเว็บ' || y.title == 'จัดการรายการ ฝาก-ถอน'" class="collapse" id="menu_{{y.id}}">
                            <ul class="nav" > 
                                <li x-ng-repeat-end ng-repeat="z in x.data">
                                    <a href="{{z.url}}">
                                        <i class='{{ z.symbol }}'></i><span ng-bind="z.title"></span>
                                    </a>
                                </li>                                
                                
                            </ul>
                        </div>
                            
                    </li>            
                </ul>
       </div>
            <div class="sidebar-background"></div>
        </div>
        <div class="main-panel">
            <nav class="navbar navbar-transparent navbar-fixed">
                <div class="container-fluid">
                    <div class="navbar-minimize">
                        <button id="minimizeSidebar" class="btn btn-round btn-white btn-fill btn-just-icon">
                            <i class="material-icons visible-on-sidebar-regular">more_vert</i>
                            <i class="material-icons visible-on-sidebar-mini">view_list</i>
                        </button>
                    </div>
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href=""> เพิ่มผู้ใช้งาน </a>
                    </div>
                    <div class="collapse navbar-collapse">
                        <ul class="nav_right  navbar-nav navbar-right" style="">
                            <li class="dropdown ">
                                <a href="">
                                    <i class="fa fa-bell fa-2x"></i>
                                    <span class="notification">5</span>   
                                    <p class="hidden-lg hidden-md">
                                        Notifications
                                </p>
                                </a>
                            </li>
                            <li class="dropdown " onclick="logout()">
                                <a href="">
                                    <i class="fa fa-sign-out-alt fa-2x"></i>
                                    <p class="hidden-lg hidden-md">Logout</p>
                                </a>
                                
                            </li>
                            <li class="separator hidden-lg hidden-md"></li>
                        </ul>
                    </div>
                </div>
            </nav>
            
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
       				    <div  class="col-extra" style="margin-top:10px;">
                                <div class="card-content table-responsive" >
                                    <!-- <div class="note">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div style="margin-top: 8px;"> <a style="padding: 8px;" href="/members/member" class="btn_default  btn_add">ย้อนกลับ</a></div>
                                           
                                           
                                            </div>

                                        </div>
                                    </div> -->
                                    <div class="note">
<a onclick="window.history.back()" class="btn green-meadow"><strong><i class="material-icons">keyboard_return</i> ย้อนกลับ</strong></a>
</div>
                                </div>
                           <div class="card-extra">
   							 <div class="card-body">
   							  <div class="portlet box green">
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-picture"></i> Form 
       
        </div>
<!--        <div class="tools">
            <a href="javascript:;" class="collapse" data-original-title="" title="">
            </a>
            <a href="#portlet-config" data-toggle="modal" class="config" data-original-title="" title="">
            </a>
            <a href="javascript:;" class="reload" data-original-title="" title="">
            </a>
            <a href="javascript:;" class="remove" data-original-title="" title="">
            </a>
        </div>-->
    </div>
    <div class="portlet-body">
        <div class="row">
<div class="col-md-9">
<div class="portlet box green ">
  
        <form class="form-horizontal" method="post" id="form_add_user">
        <input name="ac" type="hidden" value="save">
        <input name="id" type="hidden" value=""> 
            <div class="form-body" style="margin-top: 10px;">
            
            <!-- username -->            
            <div class="form-group">
                <label class="col-md-3 control-label">Username</label>
                <div class="col-md-6">
                        <input type="text" class="form-control" name="username" value="">
                </div>
            </div>
            
            <!-- pass --> 
            <div class="form-group">
                <label class="col-md-3 control-label">Password</label>
                <div class="col-md-6">
                        <input role="0" type="password" class="form-control" name="password" value=""><span role="0" class="icon-view" onclick="viewPassword();"><i class="fa fa-eye" aria-hidden="true"></i></span>
                </div>
            </div>
            
            <!-- machine --> 
            <div class="form-group">
                <label class="col-md-3 control-label">ชื่อ</label>
                <div class="col-md-6">
                        <input type="text" class="form-control" name="machine" value="">
                </div>
            </div>      
                
            <!-- role -->                         
            <div class="form-group">
                <label class="col-md-3 control-label">ระดับ</label>
                <div class="col-md-3">
                 <select class="form-control" name="role">
                                 <option value="">เลือกระดับ</option>
                                 <option value="0">ผู้จัดการ</option>
                                 <option value="1">คอเซนเตอร์	</option>
                        </select>
                 </div>
            </div>
            
          <!--   <div class="form-group" >
                <label class="col-md-3 control-label">เว็บไซต์</label>
                <div class="col-md-6">
                        <input type="text" class="form-control" name="web" value="">
                </div>
            </div>-->
            
            <!-- email -->
             <div class="form-group">
                <label class="col-md-3 control-label">email</label>
                <div class="col-md-6">
                        <input type="text" class="form-control" name="email" value="">
                </div>
            </div>        
            
            <!-- phone -->    
            <div class="form-group">
                <label class="col-md-3 control-label">เบอร์โทร</label>
                <div class="col-md-6">
                        <input type="text" class="form-control" name="phone" value="">
                </div>
            </div> 
            
            
            
            </div>   
            
            <div class="form-actions">
                <div class="row">
                    <div class="col-md-offset-3 col-md-9">
                        <button type="submit" class="btn green">Submit</button>
                        <button type="button" class="btn default">Cancel</button>
                    </div>
                </div>
            </div>
    </form>    
    </div>
    

</div>
</div>

    
            
                        
        </div>
    </div>
</div>
        
                            </div>
							</div>
                        
                      </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav class="pull-left">
                        <ul>
                            <li>
                                <a href="">
                                    Home
                                </a>
                            </li>
                            <li>
                                <a href="">
                                    Company
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <p class="copyright pull-right">
                        ©
                        <!--  <script async="" src="/analytics.js.ดาวน์โหลด"></script> -->
                        <script>
                            document.write(new Date().getFullYear())
                        </script>2017
                        <a href=""></a>
                    </p>
                </div>
            </footer>
        </div>
    </div>
    <!-- <div class="fixed-plugin">
    </div> -->
    <!--   Core JS Files   -->
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script src="../../js/jquery/jquery-ui.min.js" type="text/javascript"></script>
      <script src="../../js/bootstrap.min.js" type="text/javascript"></script>
      <script src="../../js/material.min.js" type="text/javascript"></script>
      <script src="../../js/jquery/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
      <script src="../../js/jquery.cookie.min.js"></script>
      <script defer src="../../js/all.js" ></script>
      <script src="../../js/jquery.validate.min.js"></script>
      <!--  Plugin for Date Time Picker and Full Calendar Plugin-->
      <script src="../../js/moment.min.js"></script>
      <!--  Charts Plugin -->
      <!-- <script src="js/chartist.min.js"></script> -->
      <!--  Plugin for the Wizard -->
      <script src="../../js/jquery.bootstrap-wizard.js"></script>
      <!--  Notifications Plugin    -->
      <!-- <script src="files/js-/bootstrap-notify.js"></script> -->
      <!--   Sharrre Library    -->
      <script src="../../js/jquery.sharrre.js"></script>
      <!-- DateTimePicker Plugin -->
      <script src="../../js/bootstrap-datetimepicker.js"></script>
      <!-- Vector Map plugin -->
      <script src="../../js/jquery-jvectormap.js"></script>
      <!-- Sliders Plugin -->
      <script src="../../js/nouislider.min.js"></script>
      <!--  Google Maps Plugin    -->
      <!-- <script src="files/js-/js"></script> -->
      <!-- Select Plugin -->
      <!-- <script src="../../js/query.select-bootstrap.js"></script> -->
      <!--  DataTables.net Plugin    -->
      <script src="../../js/jquery.datatables.js"></script>
      <script src="../../js/sweetalert3.js"></script>
      <!-- Sweet Alert 2 plugin -->
      <!-- <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script> -->
      <!-- <script src="../../js/sweetalert2.js"></script> -->
      <!--    Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
      <script src="../../js/jasny-bootstrap.min.js"></script>
      <!--  Full Calendar Plugin    -->
      <script src="../../js/fullcalendar.min.js"></script>
      <!-- TagsInput Plugin -->
      <script src="../../js/jquery.tagsinput.js"></script>
      <!-- Material Dashboard javascript methods -->
      <script src="../../js/material-dashboard.js"></script>
      <!-- Material Dashboard DEMO methods, don't include it in your project! -->
      <script src="../../js/jquery/demo.js"></script>
      <script src="../../js/angular.min.js"></script>
      <script src="../../js/angular-cookies.min.js"></script>
      <script src="../../js/angular-route.js"></script>
       <script src="../../js/angular-base64.js"></script>      
        <!-- <script src="../../js/sweet-alert.min.js"></script> -->
       <!-- <script src="../../js/SweetAlert.js"></script> -->
       <script src="../../js/loading.js"></script>

       
    
      <!-- <script src="../../js/main.js?v=<?=time()?>"></script> -->
      <!-- <script type="text/javascript">
         $(document).ready(function() {
             // Javascript method's body can be found in assets/js/demos.js
             demo.initDashboardPageCharts();
             demo.initVectorMap();
         });
         </script> -->
      <div class="jvectormap-tip"></div>
   </body>
</html>
<script>
   var app = angular.module('myApp', ['ngCookies','base64']);
   app.controller('myCtrl', function($scope, $http, $cookies, $window,$base64,$location) {
        $scope.role;
        loadpage();
        $scope.token = $cookies.get('login');
        function loadpage() {
            if ($cookies.get('login')) {
               
                $http({
                    method: 'post',
                    url: "/getPageData",
                    data: $.param({
                        token: $cookies.get('login')
                    }),
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                }).then(function(res) {
                    if (res == "invalid") {
                        location.href = "/login";
                        return;
                    }
                    else{
                        console.log(res)
                        $scope.machine = res.data[0].machine;
                        $scope.isSuperAdmin = (res.data[0].role == 0) ? true : false;
                        $scope.isAdmin = (res.data[0].role == 1) ? true : false;
                        $scope.isUsernomal = (res.data[0].role == 10) ? true : false;
                        if (res.data[0].role == 0)
                            $scope.role = 0;
                        else if (res.data[0].role == 1)
                            $scope.role = 1;
                        else
                            $scope.role = 10;
                        if (res.data[0].email != undefined) {
                            $scope.name = (res.data[0].email).split('@');
                            $scope.Username = $scope.name[0];
                            console.log($scope.Username)
                        }
                        $("#menu_member").addClass('active');
                        $scope.Menu = res.data[1];
                        console.log($scope.Menu)
                        closeloading();
                        $http({
                            method: 'post',
                            url: "/getallagent",
                            //data: $.param({
                               // token: $cookies.get('login')
                           // }),
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded'
                            }
                            }).then(function(res) {
                               console.log(res)
                               $scope.dataGambling = res.data;
                            });
                    }
                    
                });
            }
            else {
                $window.location.href = '/login';
            } 
        }
    });
    
    
    $('#form_add_user').submit(function( event ) {

		console.log($(this).serialize());
	 $.post( "/adduser", $(this).serialize() ,function( data ) {

		    swal({
                title: "เพิ่มสำเร็จ!",
                text: "ทำการเพิ้มผู้ใช้เรียบร้อยแล้ว",
                buttonsStyling: false,
                confirmButtonClass: "btn btn-success",
                type: "success"
            });
            setTimeout(function(){ window.location = "./user"; }, 3000);
	  });
	  
	  event.preventDefault();
	});
	
	function viewPassword(){
		var check = $('input[name="password"]').attr('role');
		if(check==0){
			$('input[name="password"]').attr('type','text');
			$('input[name="password"]').attr('role','1');
		}else{
			$('input[name="password"]').attr('type','password');
			$('input[name="password"]').attr('role','0');
		}
	}
</script>